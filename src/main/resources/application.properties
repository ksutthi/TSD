# ============================================================
# ?? DATABASE CONNECTION (MS SQL Server)
# ============================================================
spring.datasource.url=jdbc:sqlserver://localhost:1433;databaseName=TSD_Registry;encrypt=false
spring.datasource.username=sa
spring.datasource.password=NewPassword123!
spring.datasource.driverClassName=com.microsoft.sqlserver.jdbc.SQLServerDriver

# ? FIX: Explicitly tell Spring Boot to use SQL Server Dialect
spring.jpa.database-platform=org.hibernate.dialect.SQLServerDialect

# ============================================================
# ?? HIBERNATE / JPA
# ============================================================
# Naming: Use table names EXACTLY as typed (e.g. "AccountBalances")
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
spring.jpa.hibernate.naming.implicit-strategy=org.springframework.boot.orm.jpa.hibernate.SpringImplicitNamingStrategy

# ? CRITICAL CHANGE: Changed from 'update' to 'validate'
# This prevents the "CommandAcceptanceException" error.
# We now rely on your SQL scripts (V1__Init_Schema.sql) to manage the DB structure.
spring.jpa.hibernate.ddl-auto=validate

# Logging: Keep it quiet (Use logback.xml for detailed control)
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# Turn off Hibernate internal noise
logging.level.org.hibernate.SQL=OFF
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=OFF

# ============================================================
# ? SPRING BATCH & APP SETTINGS
# ============================================================
# ? FORCE Spring to create the missing BATCH_ tables (BATCH_JOB_INSTANCE, etc.)
spring.batch.jdbc.initialize-schema=always

# Disable auto-run (We run jobs manually via Controller or Scheduler)
spring.batch.job.enabled=false

# Allow bean overriding (Useful for test configs and reloading cartridges)
spring.main.allow-bean-definition-overriding=true

